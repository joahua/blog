---
title: Sunrise Family website
author: Josh Street
layout: post
permalink: /2006/01/30/sunrise-family-website/
categories:
  - Design
  - Geek
  - PHP
  - Usability
  - Web Standards
tags:
  - AJAX
  - AppleScript
  - assistive technologies
  - australia
  - Australian Open
  - Dave Shea
  - DOM
  - Freq Club
  - HTML
  - internal Online team
  - Internet Explorer
  - Internet Explorer/Windows XP
  - JavaScript
  - online team
  - operating systems
  - PDA
  - PHP
  - search bar
  - Seven Store
  - step forward
  - Sunrise
  - syndication services
  - Triple M
  - web accessibility
  - Web Dev extension
  - Web Standards
  - web strategy
  - "Wendy's store"
  - Windows
  - Windows XP
  - XML
  - Yahoo!
---
<p><a href="http://www.sunrisefamily.com.au/"><img src="/blog/wp-content/2006/01/srf.jpg" alt="A screen capture of the Sunrise Family website" /></a></p>
<h3>The site</h3>
<p>This is the <a href="/blog/2006/01/27/something-unpredictable">vaguely alluded to</a> website of a few days ago, for Seven Network&#8217;s breakfast show (I refuse to describe any such commercial network drivel as &#8220;current affairs&#8221;!), <a href="http://seven.com.au/sunrise/">Sunrise</a>. The Sunrise Family is essentially an incentive/loyalty scheme vaguely akin to Triple M&#8217;s (recently-abandoned&#8230; doubtless to be re-released in nearly exactly the same form under a different brand) <a href="http://www.triplemrocks.com.au/freqclub/">Freq Club</a> and <a href="http://www.entertainmentbook.com.au/">Entertainment Book</a>-style discounts. There might be more later on, but that seems to be about it so far as what&#8217;s there right now. And, truth be told, I&#8217;m not really sure what else is coming&#8230; I&#8217;d love to replace Sunrise&#8217;s boring <a href="http://seven.com.au/sunrise/form_roswall">ROSwall form</a> with something akin to the infamous Flash <a href="http://www.flashcomguru.com/apps/letters/">Just Letters interactive fridge thingo</a>, though maybe in an add-only type way, which would link in to viewers&#8217; existing Family login (i.e. so they don&#8217;t have to enter their name every time, etc.), but that&#8217;s just an idea of mine.</p>
<h3>The technology</h3>
<p>So, <a href="http://sunrisefamily.com.au/current/content/deals/">the deals</a>.</p>
<p>The interface is using AJAX, presently with inline onClick triggers &#8212; because, unfortunately, I&#8217;m not quite good enough to make it pull the data from the ID&#8230; though, if you view source, I&#8217;ve setup the ID&#8217;s to have two pieces of data in there. If anyone can tell me how to write an event handler that converts an ID into a string which I can then feed to an onClick handler (and, server-side, explode() using PHP) I&#8217;m still very keen to fix that &#8220;properly&#8221;. The ID&#8217;s have two data elements because the Deals interface is designed to add support for multiple states (i.e. localised offers, etc.) in the future. And they&#8217;re prefixed by <code>d_</code> because, obviously, valid identifiers can&#8217;t start with a number. D can stand for &#8220;deal&#8221; or &#8220;data&#8221;, whatever :-)</p>
<p>As for how the AJAX is pulling down data, I&#8217;m just using innerHTML, because it works in pretty much everything and is lots faster and lots simpler than &#8220;real&#8221; DOM methods, especially here. Observe the &#8220;Details&#8221; pane on the right of that page, and how there are different numbers of paragraphs of text, different types of data (lists, anchors, etc.), then consider how ridiculous it would be to use DOM scripting there. Euuuuccch. So, I&#8217;m not-quite standard but perfectly comfortable about that. I am, however, using HTML 4.01 as the doctype. There is no reason to use XHTML, and I&#8217;m not happy to use XHTML and not serve it properly. And, if I serve it properly, it&#8217;s too likely to break (parsers spit the dummy when encountering bad XHTML, because tolerance is zero) for a production site. Further, obviously, innerHTML doesn&#8217;t work when documents aren&#8217;t served/parsed as anything other than <code>text/html</code>.</p>
<p>I&#8217;d rather do absolutely awesome HTML 4.01 than valid but mediocre (and ultimately pointless, seeing as it&#8217;s not being parsed as XML even) XHTML.</p>
<p>In other nifty technology-related stuff, Yahoo!7&#8242;s partnership means (hopefully) that Seven will up the ante in terms of what technologies they&#8217;re unfurling. For us, this means taking a step forward and providing syndication services (both Atom and RSS formats) for the deals. For Seven as a whole? Well, maybe they&#8217;ll start to get rid of their once-ubiquitous table-based layouts, and (maybe) embrace more of an open broadcasting paradigm in line with their web strategy &#8212; assuming Yahoo! are directing that in any way, and/or that Seven&#8217;s online team have open minds &#8212; I don&#8217;t really know and haven&#8217;t personally dealt with anyone there, so I&#8217;ll just assume they must have a handful of cluey people on board!</p>
<p>The RSS and Atom feeds won&#8217;t be available if you&#8217;re checking it out on Monday, but it&#8217;ll likely be running by the end of the week. For Yahoo! users, this means they can add Sunrise Family Deals to their personalised page (but, seriously, who uses portals? I never understood that whole thing). For everyone else, you should be able to download a feed reader and add the feeds. I&#8217;d love to have a page telling people how to do this on the site, but imagine Yahoo! would object. So I&#8217;m saying it here: the people that matter know how to do it! (Though, I imagine, the &#8220;people that matter&#8221; &#8212; you, dear reader &#8212; aren&#8217;t particularly regular Sunrise viewers. Or, like me, never Sunrise viewers. Heh.)</p>
<p>We&#8217;ve also implemented a spot of JavaScript to fix text-selection in Internet Explorer. My layout is pretty insane in terms of the sheer quantity of absolutely positioned elements, which broke that functionality in Internet Explorer. One quick question to the WSG mailing list later, someone had provided a JavaScript fix (which we had to edit a little bit to make work properly, because we had problems with flickering elements even with cache enabled).</p>
<h3>The eye-candy</h3>
<p>I&#8217;ve implemented useless (but rather cool) eye-candy on the Deals page in the Details pane whenever a new deal is selected. A variation of the <a href="http://www.axentric.com/aside/fat/">Fade Anything Technique</a>, which is only meant to be pretty. No originality is claimed, we&#8217;ve had this technology all millennium.</p>
<h3>Accessibility</h3>
<p>Disable JavaScript and you lose the fades, and use a little more bandwidth as the entire page reloads for every item you click. In terms of non-visual user agents with JavaScript disabled, I&#8217;ve put the &#8220;Details&#8221; above the list of offers in source-order, and on every reload they only hear &#8220;Sunrise Family. Link: Skip to main content&#8221; (presuming they select the link) before getting to the actual details, so I&#8217;m fairly happy on that front.</p>
<p>Additionally, I&#8217;ve got the &#8220;header&#8221; from <a href="http://www.yahoo7.com.au/">Yahoo!7</a> last in source-order, so anyone with assistive technologies don&#8217;t have to skip over that EVERY TIME they change the page. It was a little painful to figure out, not in the least because Yahoo&#8217;s supplied universal header isn&#8217;t at all nice for sites that are built properly &#8212; i.e. with web standards and accessibility in mind &#8212; but I much prefer it this way. This is also something we had to achieve silently and without complaining, because, whilst anyone who has a clue about web accessibility will immediately see this is a good idea, marketing people would conceivably think: &#8220;But we <em>want</em> people to see our search bar more often!&#8221;. Er, no, you don&#8217;t achieve anything by pissing off users. No matter, we pulled it off without making any noise about it!</p>
<p>We&#8217;re server-side sniffing for Firefox and handing it an &#8220;Add Yahoo!7 to the Firefox Search Box&#8221; link (which, incidentally, has particularly horrid inline JavaScript &#8212; but I don&#8217;t care because the only UA it&#8217;s being served to can do something useful with it), whilst IE users get a &#8220;Make this my homepage&#8221; link in its place. Yahoo&#8217;s version (which you can see on Seven&#8217;s &#8212; pure Flash, *obligatory shudder* &#8212; <a href="http://ausopen.seven.com.au/australianopen2006/">Australian Open website</a>, though I think that version (of the header, not the website) might now be deprecated) uses JavaScript for that, but it was fairly obtrusive and, seeing as we have the ability to do that server-side, I&#8217;d much rather reduce page weight.</p>
<p>In terms of accessibility generally speaking, I&#8217;ve bundled in all the usual goodies such as a skip to main content link, as well as skip to login on the front page, base font size of 100.01%, and relative font sizing throughout&#8230; but extensive image replacement techniques mean that the headers are probably sub-optimal in terms of visibility. This one is out of my control, and everyone else in the workplace seems to love small text (even Lyn, who seems to often put on glasses to read things on a screen&#8230; go figure!) so I wasn&#8217;t going to fight too hard about it. All other text will scale pretty well, with the exception of the deals &#8212; because the layout is so tight, it&#8217;s only really possible to go up one, maybe two size steps in most browsers.</p>
<p>We&#8217;re lacking any explicit accessibility statement, and we&#8217;re also lacking access keys. Mostly because I&#8217;m convinced access keys are practically useless, and rarely bother to implement them. (On forms, there are never enough buttons for access keys and/or there&#8217;s no logical combination available, and everywhere else it sort of seems a bit pointless unless <em>everything</em> has an access key. Where do you draw the line?)</p>
<p>This site is interesting to me because, even though it&#8217;s a television audience, I still can&#8217;t make assumptions about how people will be browsing. PDA devices, for example, would struggle with our built-for-1024 layout had we done it with tables. For this site, PDA/mobile users are realistic: for example, if someone incidentally is near a Wendy&#8217;s store and remembers they might&#8217;ve seen something on the Sunrise website but can&#8217;t remember the details, they can quickly and painlessly look it up.</p>
<p>Further, the site also has to cater for people with cognitive or motor disabilities. For cognitive disabilities, one thing in our favour is that we&#8217;ve provided a short summary of each deal before a more heavy-duty fulltext item. For users with motor disabilities, the entire website should be accessible via tabbing &#8212; including the JavaScript-enabled Deals page.</p>
<p>I lost an argument regarding target=&#8221;_blank&#8221;, but <em>will</em> eventually win this point. A handful of advertisements &#8212; including those for intra-network links, such as for the Seven Store &#8212; open in new windows, which I am most certainly not a fan of. All external links, however, should have the <code>rel</code> attribute set to external. There is unfortunately no visual cue associated with this. Links I count as my biggest area of defeat in this website, which is pretty good (as in, I&#8217;d rather it just be that than something more significant such as iframe usage, enormous usability problem though new windows may present).</p>
<p>Inline JavaScript is completely unrelated to accessibility in light of the <em>way</em> this has been implemented. Admittedly, it would be advantageous to use event handlers in place of inline JavaScript (and we will be thinking that to ourselves as we look at the traffic statistics), but from an accessibility perspective it has very little impact. Standard HREF&#8217;s are defined, and caught with Javascript using <code>return false;</code> No functionality is lost. I much prefer this method to scattering iframes throughout the site! At any rate, I&#8217;m still trying to resolve this one, accessibility related or not. It&#8217;s a matter of personal pride, I suppose.</p>
<h3>The Styles and Bugs</h3>
<p>The entire design (done in-house by Dacien) is awesome (in my opinion &#8212; if I didn&#8217;t think it was, I just would have kept quiet about it), but <em>very</em> tight.</p>
<p>So tight, in fact, that I had to set outline:0; on some links to stop Firefox from breaking the layout (1 pixel difference) when a link was active (as they are when you click a deal and it&#8217;s caught by JavaScript rather than actually reloading the page &#8212; the link <em>remains</em> active), adding a 1 pixel dotted border. Cross browser support is pretty awesome &#8212; it should be good in IE back to 5 &#8212; Opera, Safari, Konqueror, and even (mostly) IE 5.2 Mac are happy. Firefox deserves special mention: it has so many little (big for this site) things wrong with it that it&#8217;s often rather painful to make work properly. In fact, of all browsers mentioned, Firefox 1.0.x (on non-Windows platforms) is the only one whose behaviour I&#8217;m definitely not happy with (mostly because I expect better from it, but also because it gets some things horribly wrong).</p>
<p>Such as, for example, the &#8220;<a href="http://sunrisefamily.com.au/current/content/meet/">Meet the Family</a>&#8221; page. It works perfectly or near-perfectly in every other browser, but certain Firefox variants on certain platforms render only the first two items in the &#8220;Sunrise Team&#8221; list(/right column, if you&#8217;ll excuse my presentational-speak) on first load&#8230; and then renders perfectly if you refresh the page. This is what I meant by my <a href="/blog/2006/01/25/predictable-inadequacy">&#8220;predictable inadequacy&#8221;</a> post of a few days ago. I&#8217;m fairly certain it&#8217;s something to do with floated list items, but possibly not.</p>
<p>Another bug is (also in Firefox &#8212; noticing a trend, anyone? No, I didn&#8217;t build for IE. I wrote about 90% of the stylesheet sitting in Firefox 1.5.x using Chris Pederick&#8217;s Web Dev extension, and both that browser and Opera operate near-perfectly) Firefox 1.0.x&#8217;s penchant for adding scrollbars where they&#8217;re not required with overflow:auto (see front page on non-Windows platforms, and the Deals page &#8212; lots of style overlap/common classes there, so this is to be expected).</p>
<p>By far the most <em>interesting</em> rendering difference I encountered building a layout this tight was between Internet Explorer/Windows XP with and without Windows Themes enabled. Yes, it does make a difference. Interface widgets shouldn&#8217;t really interfere with styles at all, IMO, but they did here. The solution basically entailed shaving off a couple of pixels where required, so I didn&#8217;t come up with something particularly innovative for it!</p>
<h3>Summary</h3>
<p>In all, I&#8217;m pretty happy with the site. Seven&#8217;s internal Online team apparently noticed/complimented our team on the absence of layout tables, which I (perhaps arrogantly) take with some degree of indifference: people shouldn&#8217;t be building sites with tables for that purpose anyway. If we are to be complemented, then it should be on the design (and, as part of that, achieving a design this &#8216;tight&#8217; with CSS), or on the usability benefits realised by intelligent integration of AJAX, or the development pace (again, partially because of the flexibility CSS gives us), or maybe on lightweight, semantic code as a cost-saving mechanism.</p>
<p>Truth be told, I now believe we may have even gone a little overboard with the tables elimination. If I could do it all again, the Deals page would feature a table instead of a list, and I&#8217;d use DOM scripting to insert/delete records rather than replace the &#8220;state&#8221; part with innerHTML. The markup might gain a (very) little bit of weight, but it&#8217;d be worth it. It would, of course, remain semantically sensible and completely accessible. It&#8217;d probably be <em>more</em> semantically sensible, actually. I realised a table would work great about two days after I&#8217;d finished styling the list, and thought &#8220;I&#8217;ve put way too much effort into this to pull it now&#8221;, but felt like <a href="http://www.mezzoblue.com/archives/2005/03/31/too_far/">Dave Shea must have after building a &#8220;pseudo table&#8221;</a> without realising. At least it wasn&#8217;t that complex!</p>
<p>Anyway, I&#8217;m really interested to hear what people have to say about the site. We&#8217;re being plugged every half hour on Sunrise tomorrow morning from 6am, and will be anxiously watching the server to see what, exactly, the effect of promotion on a show with 4 million viewers daily has on bandwidth, etc. I&#8217;ve also installed an AWstats tracker to collect aggregate data (as on this site) which we&#8217;ll parse later on (assuming the horrible monster that it&#8217;s running on, Zeus, outputs normal-ish log files for me! Oh, and it doesn&#8217;t support mod_rewrite, but instead has some retarded alternative that seems like a cross between VBA and AppleScript &#8212; and fails as much as the latter did in terms of <em>actual</em> ease of use, despite trying to use human language. It&#8217;s very dumb.) to figure out how Australia is doing in terms of browsers, operating systems, screen resolutions, JavaScript support, and the like. Should be incredibly interesting stuff, and I can&#8217;t wait!</p>
